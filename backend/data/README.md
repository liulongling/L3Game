# MySQL开发规范

MySQL 保留字目录：https://dev.mysql.com/doc/refman/5.6/en/keywords.html

## 基础规范
字符集统一使用 utf8 或 utf8mb4，首选 utf8 utf8mb4 是 utf8 的超集，utf8 比 utf8mb4 少一个字节,能够节约空间。
同时 utf8mb4 会加大相应的索引长度，降低索引效率。当有 Emoji 和不常用的汉字等特 殊需求时，再选用 utf8mb4。 不用指定校对规则，默认 utf8_general_ci 即可。

## 对象命名规范
命名只能使用英文字母、数字和下划线三类字符组合。尽量使用英文单词，不要 使用拼音，多个单词组成时，中间以下划线“_”分割。

## 数据库硬核规范：五必须，五禁止

### 五必须
- 业务表必须使用 innoDB 存储引擎
- 业务表、库、字段字符集必须统一
- 必须指定主键
- DML 脚本必须开启事务
- DML、DDL 脚本必须指定库名

### 五禁止
- 禁止字段个数超过 50 个
- 禁止使用外键
- 禁止大写字母命名库名、表名、字段名，统一使用小写字母
- 禁止使用 MySQL 保留字做库名、表名、字段名
- 禁止使用存储过程、事件、触发器

## 为什么要执行五必须五禁止

#### Q：业务表必须使用 innoDB 存储引擎
1.支持事务：InnoDB 支持 ACID(原子性、一致性、隔离性、持久性)事务，保证数据的完整性和一致性。
2.提供外键约束：InnoDB 支持外键约束，可以保证数据的完整性和一致性。
3.提供行级锁：InnoDB 支持行级锁，使得多个用户可以并行地读取和修改数据，提高系统的并发性。
4.提供高可用性：InnoDB 支持热备份和数据重建，使得系统具有高可用性。

#### Q：业务表、库、字段字符集必须统一
统一字符集可以避免由于字符集转换产生的乱码。

#### Q：必须要显式指定主键
InnoDB 表实际是一棵索引组织表，顺序存储可以提高存取效率，充分利用磁盘空间。
1.不创建主键时，使用不了主键索引，查询会进行全表扫描，影响性能
2.插入数据需要生成ROW_ID，而生成的ROW_ID是全局共享的，并发会导致锁竞争，影响性能

#### Q：禁止字段个数超过 50 个
单表字段数上限50个，再多的话考虑垂直分表，一是冷热数据分离，二是大字段 分离，三是常在一起做条件和返回列的不分离。表字段控制少而精，可以提高 IO 效率，内存缓存更多有效数据，从而提高响应速
度和并发能力，后续 ALTER TABLE 也更快。

#### Q：为什么禁止使用外键
外键严重影响数据库性能，增加表维护复杂度，另外我们的业务场景无需依赖外键，所以禁用外键

